{% extends 'base.html' %}
{% load staticfiles %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{% static 'mission/mission_index.css' %}" />
{% endblock head %}

{% block content %}
  {% if Mission_end %}
  <br>
  <br>
  {{ Mission_end }}
  <br>
  {% endif %}

  <div class="jumbotron">
    {% for m in mission  %}
    <h2 id="missionname">{{m.mission_name}}</h2>
    <h4 id="clock">시간추가</h4>
    {% endfor %}
  </div>  

  <br>

  {% for post in posts %}
  <div class="card" align='center'>
    <p id='title'>{{post.title}}</p>
    <p id='writer'>작성자: {{post.writer}} <br> 득표수: {{post.votelike.count}}</p>  
    <a href="{% url 'detail' post.id %}">
      
      <img id="image" src="{{post.content.url}}" alt="이미지"  />
    </a>
  </div>
  <br>
  {% endfor %}
  </div>

  <!--페이지네이션-->

  <div class = "pagination">
    {% if posts.has_previous %}
      <a href="?page=1">First</a>
      <a href="?page={{posts.previous_page_number}}">Previous</a>
      {% else %}
      <button>First</button>
      <button>Previous</button>
      {% endif %}


      <span>{{posts.number}}</span>
      <span> of </span>
      <span>{{posts.paginator.num_pages}}</span>

      
      {% if posts.has_next %}
      <a href="?page={{posts.next_page_number}}">Next</a>
      <a href="?page={{posts.paginator.num_pages}}">Last</a>
      {% else %}
      <button>Next</button>
      <button>Last</button>
    {% endif %}
  </div>
  <br>
  <br>
  {% if user.is_authenticated %}
  <a href="{% url 'postcreate' %}">참가하기</a>
  <br>
  <a href="javascript:{document.getElementById('logout').submit()}">로그아웃</a>
  <form action="{% url 'logout' %}" method="POST" id="logout">
  {% csrf_token %}
  <input type="hidden">
  </form>
  <br>

  {% else %}
  <a href="{% url 'signup' %}">회원가입</a>
  <br>
  <a href="{% url 'login' %}">로그인</a>
  <br>
  <a href="{% url 'login' %}" onclick="return confirm('로그인을 한 후, \'참가하기\'가 가능합니다.')">참가하기</a>
  {% endif %}
{% endblock content%}  

